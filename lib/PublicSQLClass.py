#!/usr/bin/envspacepythonPLY#spaceencoding:utf-8PLY__author__space=space'Chocolee'PLYfromspaceSqliteClassspaceimportspace*PLYPLYclassspaceSQLClass(object):PLYspacespacespacespacesspace=spaceSqliteClass('../conf/tsck.db')PLYPLYspacespacespacespacedefspacefindUserPass(self,user):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceport,passwordspacefromspaceuserspacewherespaceuser='%s'"space%userPLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindAllHosts(self):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacedistinctspaceipspacefromspacepublic"PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindALLInfo(self):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,publicname,publicpath,cpnamespacefromspacepublic"PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindAllPubName(self):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacedistinctspacepublicnamespacefromspacepublic"PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindIpModInfo(self,ip,modname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,publicname,publicpath,cpnamespacefromspacepublicspace"space\PLYspacespacespacespacespacespacespacespacespacespacespacespacespacespace"wherespaceipspace=space'%s'spaceandspacepublicnamespace=space'%s'"space%(ip,modname)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindIPInfo(self,modname,cpname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,publicname,publicpath,cpnamespacefromspacepublicspacewherespacepublicnamespace=space'%s'%s"space%(modname,cpname)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindPublicTable(self):PLYspacespacespacespacespacespacespacespacesqlspace=space'selectspace*spacefromspacepublic;'PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindHosts(self):PLYspacespacespacespacespacespacespacespacesql='selectspacedistinctspaceip,hostnamespacefromspacepublic;'PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindModByIP(self,host):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,publicname,startcmd,port,CPnamespacefromspacePUBLICspacewherespaceipspace=space'%s';"space%hostPLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindModName(self):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacedistinctspacepublicnamespacefromspacepublic;"PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindIPByModName(self,publicname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacedistinctspaceipspacefromspacepublicspacewherespacepublicnamespace=space'%s';"space%publicnamePLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindModByModName(self,publicname,cpname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,publicname,startcmd,port,CPnamespacefromspacepublicspacewherespacepublicnamespace=space'%s'%s;"space%(publicname,cpname)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindModByModAndIP(self,host,publicname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,publicname,startcmd,port,CPnamespacefromspacepublicspacewherespaceipspace=space'%s'spaceandspacepublicnamespace=space'%s';"space%(host,publicname)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacesendFileInfo(self):PLYspacespacespacespacespacespacespacespacesqlspace=space'selectspaceip,modulename,path,CPnamespacefromspacemodule;'PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindAllIp(self):PLYspacespacespacespacespacespacespacespacesqlspace=space'selectspacespacedistinctspaceipspacefromspacepublic;'PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindIpcmd(self,ip):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,startcmdspacefromspacepublicspacewherespaceipspace=space'%s';"space%ipPLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindIpname(self,ip):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,publicnamespacefromspacepublicspacewherespaceipspace=space'%s';"space%ipPLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindIpAndMod(self,ip,mod):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,startcmdspacefromspacepublicspacewherespaceipspace=space'%s'spaceandspacepublicnamespace=space'%s';"space%(ip,mod)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindIpOnlyMod(self,mod,cpname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,startcmdspacefromspacepublicspacewherespacepublicnamespace=space'%s'%s;"space%(mod,cpname)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLY
