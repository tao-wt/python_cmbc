#!/usr/bin/envspacepythonPLY#spaceencoding:utf-8PLY__author__space=space'Chocolee'PLYfromspaceSqliteClassspaceimportspace*PLYPLYclassspaceSQLClass(object):PLYTABsspace=spaceSqliteClass('../conf/tsck.db')PLYPLYTABdefspacefindUserPass(self,user):PLYTABTABsqlspace=space"selectspaceport,passwordspacefromspaceuserspacewherespaceuser='%s'"space%userPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindAllHosts(self):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacepublic"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindALLInfo(self):PLYTABTABsqlspace=space"selectspaceip,publicname,publicpath,cpnamespacefromspacepublic"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindAllPubName(self):PLYTABTABsqlspace=space"selectspacedistinctspacepublicnamespacefromspacepublic"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIpModInfo(self,ip,modname):PLYTABTABsqlspace=space"selectspaceip,publicname,publicpath,cpnamespacefromspacepublicspace"space\PLYTABTABTABspacespace"wherespaceipspace=space'%s'spaceandspacepublicnamespace=space'%s'"space%(ip,modname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIPInfo(self,modname,cpname):PLYTABTABsqlspace=space"selectspaceip,publicname,publicpath,cpnamespacefromspacepublicspacewherespacepublicnamespace=space'%s'%s"space%(modname,cpname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindPublicTable(self):PLYTABTABsqlspace=space'selectspace*spacefromspacepublic;'PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindHosts(self):PLYTABTABsql='selectspacedistinctspaceip,hostnamespacefromspacepublic;'PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindModByIP(self,host):PLYTABTABsqlspace=space"selectspaceip,publicname,startcmd,port,CPnamespacefromspacePUBLICspacewherespaceipspace=space'%s';"space%hostPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindModName(self):PLYTABTABsqlspace=space"selectspacedistinctspacepublicnamespacefromspacepublic;"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIPByModName(self,publicname):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacepublicspacewherespacepublicnamespace=space'%s';"space%publicnamePLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindModByModName(self,publicname,cpname):PLYTABTABsqlspace=space"selectspaceip,publicname,startcmd,port,CPnamespacefromspacepublicspacewherespacepublicnamespace=space'%s'%s;"space%(publicname,cpname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindModByModAndIP(self,host,publicname):PLYTABTABsqlspace=space"selectspaceip,publicname,startcmd,port,CPnamespacefromspacepublicspacewherespaceipspace=space'%s'spaceandspacepublicnamespace=space'%s';"space%(host,publicname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacesendFileInfo(self):PLYTABTABsqlspace=space'selectspaceip,modulename,path,CPnamespacefromspacemodule;'PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindAllIp(self):PLYTABTABsqlspace=space'selectspacespacedistinctspaceipspacefromspacepublic;'PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIpcmd(self,ip):PLYTABTABsqlspace=space"selectspaceip,startcmdspacefromspacepublicspacewherespaceipspace=space'%s';"space%ipPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIpname(self,ip):PLYTABTABsqlspace=space"selectspaceip,publicnamespacefromspacepublicspacewherespaceipspace=space'%s';"space%ipPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIpAndMod(self,ip,mod):PLYTABTABsqlspace=space"selectspaceip,startcmdspacefromspacepublicspacewherespaceipspace=space'%s'spaceandspacepublicnamespace=space'%s';"space%(ip,mod)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIpOnlyMod(self,mod,cpname):PLYTABTABsqlspace=space"selectspaceip,startcmdspacefromspacepublicspacewherespacepublicnamespace=space'%s'%s;"space%(mod,cpname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspaceFindAllIpPath(self,modStr):PLYTABTABsqlspace=space"selectspaceip,publicpathspacefromspacepublicspace%s;"%modStrPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspaceFindAllIpPathD(self,modStr):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacepublicspace%s;"space%modStrPLYTABTABreturnspaceself.s.queryAll(sql)PLY
