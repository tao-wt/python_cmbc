#!/usr/bin/envspacepythonPLY#spaceencoding:utf-8PLY__author__space=space'Chocolee'PLYfromspaceSqliteClassspaceimportspace*PLYPLYclassspaceSQLClass(object):PLYspacespacespacespacesspace=spaceSqliteClass('../conf/tsck.db')PLYPLYspacespacespacespacedefspacesendFileInfo(self):PLYspacespacespacespacespacespacespacespacesqlspace=space'selectspaceip,modulename,path,CPnamespacefromspacemodule;'PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindIpModInfo(self,ip,modname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,modulename,path,CPnamespacefromspacemodulespace\PLYspacespacespacespacespacespacespacespacewherespaceipspace=space'%s'spaceandspacemodulenamespace=space'%s';"space%(ip,modname)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespace#defspacefindIPInfo(self,modname):PLYspacespacespacespace#spacespacespacespacesqlspace=space"selectspaceip,modulename,path,CPnamespacefromspacemodulespacewherespacemodulenamespace=space'%s'"space%modnamePLYspacespacespacespace#spacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindIPInfo(self,modname,cpname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,modulename,path,CPnamespacefromspacemodulespacewherespacemodulenamespace=space'%s'%s"space%(modname,cpname)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindUserPass(self,user):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceuser,port,passwordspacefromspaceuserspacewherespaceuserspace=space'%s'"space%userPLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindHosts(self):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacedistinctspaceipspacefromspacemodule;"PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindipConfPath(self,host):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacepathspacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace=space'configcenter'"space%hostPLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindipOtherPath(self,host):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacepathspacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace!=space'configcenter'"space%hostPLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYspacespacespacespacePLYspacespacespacespace#sainter_add_startPLYspacespacespacespacedefspacefindModuleInfo(self):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,port,pathspacefromspacemodule;"PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindIPByModName(self,modname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacedistinctspaceipspacefromspacemodulespacewherespacemodulenamespace=space'%s';"space%modnamePLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindModByModName(self,modname,cpname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,port,path,CPnamespacefromspacemodulespacewherespacemodulenamespace=space'%s'%s;"space%(modname,cpname)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespace#defspacefindModByModCpName(self,modname,cpname):PLYspacespacespacespace#spacespacespacespacesqlspace=space"selectspaceip,port,pathspacefromspacemodulespacewherespacemodulenamespace=space'%s'spaceandspaceCPnamespace=space'%s';"space%(modname,cpname)PLYspacespacespacespace#spacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindModByIP(self,host):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,port,path,CPnamespacefromspacemodulespacewherespaceipspace=space'%s';"space%hostPLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindModByModAndIP(self,host,modname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,port,path,CPnamespacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace=space'%s';"space%(host,modname)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYspacespacespacespace#sainter_add_endPLYPLYspacespacespacespacedefspacefindModName(self):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacedistinctspacemodulenamespacefromspacemodule;"PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespace#defspaceQTfindIp(self,mod):PLYspacespacespacespace#spacespacespacespacesqlspace=space"selectspaceip,pathspacefromspacemodulespacewherespacemodulenamespace=space'%s'"space%modPLYspacespacespacespace#spacespacespacespacereturnspaceself.s.queryAll(sql)PLYspacespacespacespacedefspaceQTfindIp(self,mod,cpname):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,pathspacefromspacemodulespacewherespacemodulenamespace=space'%s'%s"space%(mod,cpname)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYspacespacespacespacedefspaceQTfindPath(self,mod,ip):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,pathspacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace=space'%s'"space%(ip,mod)PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspacefindHostsName(self):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacedistinctspaceip,hostnamespacefromspacemodule;"PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYspacespacespacespacedefspaceonlyFindHostsName(self,ip):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspacedistinctspacehostnamespacefromspacemodulespacewherespaceipspace=space'%s';"%ipPLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLYTABTABPLYspacespacespacespacedefspaceFindAllIpPath(self):PLYspacespacespacespacespacespacespacespacesqlspace=space"selectspaceip,pathspacefromspacemodulespaceorderspacebyspaceipspaceASC;"PLYspacespacespacespacespacespacespacespacereturnspaceself.s.queryAll(sql)PLY
