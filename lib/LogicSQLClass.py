#!/usr/bin/envspacepythonPLY#spaceencoding:utf-8PLY__author__space=space'Chocolee'PLYfromspaceSqliteClassspaceimportspace*PLYPLYclassspaceSQLClass(object):PLYTABsspace=spaceSqliteClass('../conf/tsck.db')PLYPLYTABdefspacesendFileInfo(self):PLYTABTABsqlspace=space'selectspaceip,modulename,path,CPnamespacefromspacemodule;'PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIpModInfo(self,ip,modname):PLYTABTABsqlspace=space"selectspaceip,modulename,path,CPname,portspacefromspacemodulespace\PLYTABTABwherespaceipspace=space'%s'spaceandspacemodulenamespace=space'%s';"space%(ip,modname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTAB#defspacefindIPInfo(self,modname):PLYTAB#spacespacespacespacesqlspace=space"selectspaceip,modulename,path,CPnamespacefromspacemodulespacewherespacemodulenamespace=space'%s'"space%modnamePLYTAB#spacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIPInfo(self,modname,cpname):PLYTABTABsqlspace=space"selectspaceip,modulename,path,CPname,portspacefromspacemodulespacewherespacemodulenamespace=space'%s'%s"space%(modname,cpname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindUserPass(self,user):PLYTABTABsqlspace=space"selectspaceuser,port,passwordspacefromspaceuserspacewherespaceuserspace=space'%s'"space%userPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindHosts(self):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacemodule;"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindipConfPath(self,host):PLYTABTABsqlspace=space"selectspacepathspacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace=space'configcenter'"space%hostPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindipOtherPath(self,host):PLYTABTABsqlspace=space"selectspacepathspacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace!=space'configcenter'"space%hostPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTAB#sainter_add_startPLYTABdefspacefindModuleInfo(self):PLYTABTABsqlspace=space"selectspaceip,port,pathspacefromspacemodule;"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIPByModName(self,modname):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacemodulespacewherespacemodulenamespace=space'%s';"space%modnamePLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindModByModName(self,modname,cpname):PLYTABTABsqlspace=space"selectspaceip,port,path,CPnamespacefromspacemodulespacewherespacemodulenamespace=space'%s'%s;"space%(modname,cpname)PLYTABTAB#printspacesqlPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTAB#defspacefindModByModCpName(self,modname,cpname):PLYTAB#spacespacespacespacesqlspace=space"selectspaceip,port,pathspacefromspacemodulespacewherespacemodulenamespace=space'%s'spaceandspaceCPnamespace=space'%s';"space%(modname,cpname)PLYTAB#spacespacespacespacereturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindModByIP(self,host):PLYTABTABsqlspace=space"selectspaceip,port,path,CPnamespacefromspacemodulespacewherespaceipspace=space'%s';"space%hostPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindModByModAndIP(self,host,modname):PLYTABTABsqlspace=space"selectspaceip,port,path,CPnamespacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace=space'%s';"space%(host,modname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYTAB#sainter_add_endPLYPLYTABdefspacefindModName(self):PLYTABTABsqlspace=space"selectspacedistinctspacemodulenamespacefromspacemodule;"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTAB#defspaceQTfindIp(self,mod):PLYTAB#spacespacespacespacesqlspace=space"selectspaceip,pathspacefromspacemodulespacewherespacemodulenamespace=space'%s'"space%modPLYTAB#spacespacespacespacereturnspaceself.s.queryAll(sql)PLYTABdefspaceQTfindIp(self,mod,cpname):PLYTABTABsqlspace=space"selectspaceip,pathspacefromspacemodulespacewherespacemodulenamespace=space'%s'%s"space%(mod,cpname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYTABdefspaceQTfindPath(self,mod,ip):PLYTABTABsqlspace=space"selectspaceip,pathspacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace=space'%s'"space%(ip,mod)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindHostsName(self):PLYTABTABsqlspace=space"selectspacedistinctspaceip,hostnamespacefromspacemodule;"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspaceonlyFindHostsName(self,ip):PLYTABTABsqlspace=space"selectspacedistinctspacehostnamespacefromspacemodulespacewherespaceipspace=space'%s';"%ipPLYTABTABreturnspaceself.s.queryAll(sql)PLYTABTABPLYTABdefspaceFindAllIpPath(self,modStr,orderStr):PLYTABTABsqlspace=space"selectspaceip,pathspacefromspacemodulespace%s%sspacespaceorderspacebyspaceipspaceASC;"%(modStr,orderStr)PLYTABTABreturnspaceself.s.queryAll(sql)PLYTABdefspaceFindAllIpPathD(self,modStr,orderStr):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacemodulespace%s%sspacespaceorderspacebyspaceipspaceASC;"%(modStr,orderStr)PLYTABTABreturnspaceself.s.queryAll(sql)PLY
