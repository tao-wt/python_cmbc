#!/usr/bin/envspacepythonPLY#spaceencoding:utf-8PLY__author__space=space'Chocolee'PLYfromspaceSqliteClassspaceimportspace*PLYPLYclassspaceSQLClass(object):PLYTABsspace=spaceSqliteClass('../conf/tsck.db')PLYPLYTABdefspaceAllIpList(self):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacemodulespaceunionspaceselectspacedistinctspaceipspacefromspacepublic\PLYunionspaceselectspaceipspacefromspacehadoopspaceunionspaceselectspaceipspacefromspaceredis\PLYunionspaceselectspaceipspacefromspacefastdfsspaceunionspaceselectspaceipspacefromspacemysql;space"spacePLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspaceFindRoleIp(self,role):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspace%s;"space%rolePLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindUserPass(self,user):PLYTABTABsqlspace=space"selectspaceuser,port,passwordspacefromspaceuserspacewherespaceuserspace=space'%s'"space%userPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspaceFindTeatalkIp(self,mod):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacemodulespacewherespacemodulename='%s';"space%modPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspaceFindPubIp(self,mod):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacepublicspacewherespacemodulename='%s';"space%modPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspaceFindMod(self):PLYTABTABsqlspace=space"selectspacedistinctspacemodulenamespacefromspacemodule;"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIPByModName(self,modname):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacemodulespacewherespacemodulenamespace=space'%s'\PLYunionspaceselectspacedistinctspaceipspacefromspacepublicspacewherespacepublicnamespace=space'%s';"space%(modname,modname)PLYTABTABreturnspaceself.s.queryAll(sql)PLY
