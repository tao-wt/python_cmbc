#!/usr/bin/envspacepythonPLY#spaceencoding:utf-8PLY__author__space=space'Chocolee'PLYfromspaceSqliteClassspaceimportspace*PLYPLYclassspaceSQLClass(object):PLYTABsspace=spaceSqliteClass('../conf/tsck.db')PLYPLYTABdefspacesendFileInfo(self):PLYTABTABsqlspace=space'selectspaceip,modulename,path,CPnamespacefromspacemodule;'PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIpModInfo(self,ip,modname):PLYTABTABsqlspace=space"selectspaceip,modulename,path,CPnamespacefromspacemodulespace\PLYTABTABwherespaceipspace=space'%s'spaceandspacemodulenamespace=space'%s';"space%(ip,modname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIPInfo(self,modname):PLYTABTABsqlspace=space"selectspaceip,modulename,path,CPnamespacefromspacemodulespacewherespacemodulenamespace=space'%s'"space%modnamePLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindUserPass(self,user):PLYTABTABsqlspace=space"selectspaceuser,port,passwordspacefromspaceuserspacewherespaceuserspace=space'%s'"space%userPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindHosts(self):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacemodule;"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindipConfPath(self,host):PLYTABTABsqlspace=space"selectspacepathspacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace=space'configcenter'"space%hostPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindipOtherPath(self,host):PLYTABTABsqlspace=space"selectspacepathspacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace!=space'configcenter'"space%hostPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTAB#sainter_add_startPLYTABdefspacefindModuleInfo(self):PLYTABTABsqlspace=space"selectspaceip,port,pathspacefromspacemodule;"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindIPByModName(self,modname):PLYTABTABsqlspace=space"selectspacedistinctspaceipspacefromspacemodulespacewherespacemodulenamespace=space'%s';"space%modnamePLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindModByModName(self,modname):PLYTABTABsqlspace=space"selectspaceip,port,pathspacefromspacemodulespacewherespacemodulenamespace=space'%s';"space%modnamePLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindModByIP(self,host):PLYTABTABsqlspace=space"selectspaceip,port,pathspacefromspacemodulespacewherespaceipspace=space'%s';"space%hostPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindModByModAndIP(self,host,modname):PLYTABTABsqlspace=space"selectspaceip,port,pathspacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace=space'%s';"space%(host,modname)PLYTABTABreturnspaceself.s.queryAll(sql)PLYTAB#sainter_add_endPLYPLYTABdefspacefindModName(self):PLYTABTABsqlspace=space"selectspacedistinctspacemodulenamespacefromspacemodule;"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspaceQTfindIp(self,mod):PLYTABTABsqlspace=space"selectspaceip,pathspacefromspacemodulespacewherespacemodulenamespace=space'%s'"space%modPLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspaceQTfindPath(self,mod,ip):PLYTABTABsqlspace=space"selectspaceip,pathspacefromspacemodulespacewherespaceipspace=space'%s'spaceandspacemodulenamespace=space'%s'"space%(ip,mod)PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspacefindHostsName(self):PLYTABTABsqlspace=space"selectspacedistinctspaceip,hostnamespacefromspacemodule;"PLYTABTABreturnspaceself.s.queryAll(sql)PLYPLYTABdefspaceonlyFindHostsName(self,ip):PLYTABTABsqlspace=space"selectspacedistinctspacehostnamespacefromspacemodulespacewherespaceipspace=space'%s';"%ipPLYTABTABreturnspaceself.s.queryAll(sql)PLYTABTABPLYTABdefspaceFindAllIpPath(self):PLYTABTABsqlspace=space"selectspaceip,pathspacefromspacemodulespaceorderspacebyspaceipspaceASC;"PLYTABTABreturnspaceself.s.queryAll(sql)
